---
- name: Change Windows Computer Name
  hosts: all
  gather_facts: yes

  tasks:
    - name: Set new computer name
      ansible.windows.win_hostname:
        name: "WINDOWS-10-AWX"  # Use 'name' instead of 'hostname'
      register: res

    - name: Reboot if required
      ansible.windows.win_reboot:
      when: res.reboot_required
